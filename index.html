
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cobra MP40 Gift Scanner</title>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
  <style>
    body{margin:0;background:#0f1115;color:#e8e8e8;font-family:system-ui,Arial,sans-serif;text-align:center}
    header{padding:16px 12px;font-size:20px;font-weight:700;color:#ff3b3b}
    #reader{width:320px;max-width:92vw;margin:12px auto;border-radius:16px;overflow:hidden}
    #result{margin:10px auto 18px;font-size:16px;word-break:break-all;max-width:92vw}
    .btn{padding:10px 14px;border:0;border-radius:12px;background:#2a2f3a;color:#fff;font-weight:600}
    .small{opacity:.8;font-size:13px}
    .code{font-weight:700;color:#00e09f}
  </style>
</head>
<body>
  <header>üéÅ Cobra MP40 Gift Scanner</header>

  <div id="reader"></div>

  <p id="result">üì∑ Point your camera at a QR/Barcode‚Ä¶</p>

  <button class="btn" id="copyBtn" disabled>Copy Code</button>
  <p class="small">Tip: Allow camera permission when asked.</p>

  <script>
    let lastText = "";

    function onScanSuccess(decodedText) {
      lastText = decodedText;
      document.getElementById("result").innerHTML =
        '‚úÖ Code: <span class="code">' + decodedText + "</span>";
      document.getElementById("copyBtn").disabled = false;

      // Auto-copy (best effort)
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(decodedText).catch(()=>{});
      }
    }

    function onScanError(err){ /* ignore frequent scan errors */ }

    const scanner = new Html5QrcodeScanner("reader", { fps: 10, qrbox: 250 });
    scanner.render(onScanSuccess, onScanError);

    document.getElementById("copyBtn").addEventListener("click", async () => {
      if (!lastText) return;
      try {
        await navigator.clipboard.writeText(lastText);
        document.getElementById("copyBtn").innerText = "Copied ‚úÖ";
        setTimeout(()=>document.getElementById("copyBtn").innerText="Copy Code",1200);
      } catch(e) {
        alert("Copy failed. Long-press the code to copy.");
      }
    });
  </script>
</body>
</html>
